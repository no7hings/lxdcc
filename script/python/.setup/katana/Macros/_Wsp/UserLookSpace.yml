option:
    root: '/rootNode'
    category: 'workspace'
    type: 'user_look_space'
    type_abr: 'usr_lok_spc'
    create_type: 'UserLookSpace_Wsp'
    description:
        |-
        User Look Space
        - include all look per variant
    variant_key: 'look'
    #
    auto_color: False
    #
    size:
        w_s: 240
        h_s: 80
        #
        w: 1280
        h: 480
    #
    position:
        x_start: =-<option.size.w>/2-<option.size.w_s>/2
        y_start: =<option.size.h>/2-<option.size.h_s>/2
#
main:
    type: LookSpace_Wsp
    path: '<option.root>/<option.type>'
    input: '<.path>.join_upstream'
    output: '<.path>.output'
    #
    clear_ports: False
    clear_children: False
    force_update: True
    #
    attributes:
        comment: '<option.description>'
    #
    parameters:
        type: '<option.create_type>'
#
record_update:
    backdrop:
        attributes:
            ns_text: '<option.description>'
#
node_add:
    default__geometry_properties_assign_group:
        index_x: 1
        index_y: -2
        tag: 'GAS_GRP'
        variant:
            |-
            <..key % str(x).split('__')[0]>
        type: UserGeometryPropertiesAssignGroup_Wsp
        name: '<.variant>__<.tag>'
        path: '<main.path>/<.name>'
        input: '<.path>.in'
        output: '<.path>.out'
        #
        attributes:
            x: =<option.position.x_start>+<option.size.w_s>*<..index_x>
            y: =<option.position.y_start>-<option.size.h_s>*<..index_y>
        #
        force_connections:
            - '{upstream_merge}.out'
            - '<.input>'
    #
    default__material_assign_group:
        index_x: 1
        index_y: -1
        tag: 'MAS_GRP'
        variant:
            |-
            <..key % str(x).split('__')[0]>
        type: UserMaterialAssignGroup_Wsp
        name: '<.variant>__<.tag>'
        path: '<main.path>/<.name>'
        input: '<.path>.in'
        output: '<.path>.out'
        #
        attributes:
            x: =<option.position.x_start>+<option.size.w_s>*<..index_x>
            y: =<option.position.y_start>-<option.size.h_s>*<..index_y>
        #
        force_connections:
            - '<..default__geometry_properties_assign_group.output>'
            - '<.input>'
            #
            - '<.output>'
            - '{variant_register}.<.variant>'
